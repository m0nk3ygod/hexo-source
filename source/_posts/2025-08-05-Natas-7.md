---
title: "Natas 7"
date: 2025-08-05 00:00:00 +0900
categories: ["< Overthewire >", Natas]
tags: [overthewire, natas, web basic, study, GET Method, LFI, basic php]
---

# Natas 7 / write-up

<br>

접속 정보 
- URL : http://natas7.natas.labs.overthewire.org
- 사용자 이름 : natas7
- 비밀번호 : ~~bmg8SvU1LizuWjx3y7xkNERkHxGre0GS~~

<br>

접속하면,

![Natas7 figure1](/assets/img/natas/2025-08-04-15-10-58.png)

`Home` 과 `About`  
2개의 링크가 보인다.

`Home` 부터 접속해보자.

![Natas7 figure2](/assets/img/natas/2025-08-04-15-12-20.png)

해당 링크로 접속하면 URL에서도 확인할 수 있듯  
서버에 `http://natas7.natas.labs.overthewire.org/index.php?page=home` 리소스를 요청했음을 알 수 있고,  
페이지에는 응답으로 "this is front page" 라는 문장이 출력했음을 확인할 수 있었다.

<br>

다음은 `About` 페이지에 접속해보았다.

![Natas7 figure3](/assets/img/natas/2025-08-04-15-15-33.png)

이번에는 서버에 `http://natas7.natas.labs.overthewire.org/index.php?page=about` 리소스를 요청했음을 알 수 있었고,  
페이지에는 응답으로 "this is the about page" 라는 문장을 출력했음을 확인할 수 있었다.

<br>

우선 해당 페이지가 어떻게 동작하는지 확인하기에 앞서 2개의 URL을 조금 더 살펴보자.  

`http://natas7.natas.labs.overthewire.org/index.php?page=about`  
`http://natas7.natas.labs.overthewire.org/index.php?page=home`

두 URL 모두 index.php 페이지를 사용하고 있다.

다른 점은 바로 뒤에 나오는 부분인데, 바로 '?' 이다

<br>

### Query

쿼리(Query)란, 웹 브라우저가 서버에 보내는 질문(요청)의 일부로,  
추가적인 정보(파라미터, Parameter)를 전달하는 데이터를 말한다.

질문(요청)의 시작을 의미하는 '?'를 시작으로, 뒤에 '키 = 값' 형태로 파라미터를 전달한다.  
구조는 다음과 같이 생겼다.

```
?키=값&키=값&키=-값...
```
(파라미터를 여러 개 보낼 경우 '&' 기호로 구분해준다.)

<br>

이와 같이 웹 브라우저가 서버에 정보를 URL에 붙여서 요청하는 방식을 **GET 방식** 이라고 한다.

GET Method 라고도 하는데, 또 다른 Method로 POST 방식이 존재한다.

<br>

<details>
<summary> POST Method</summary>
<div markdown="1">
요청에 데이터를 본문(body)에 숨겨서 전달하는 방식.  
로그인에 필요한 중요 정보를 다룰 때 사용.

(GET과 POST의 장단점이 있으나 여기서 다루지는 않겠음)
</div>
</details>

<br>

URL을 통해 해당 요청의 의미를 예상해보자면,

index.php 에 GET 방식으로 page라는 파라미터를 전달하면,  
해당 값에 따라 특정 페이지를 보여주는 방식의 쿼리 구조인 것 같다.

근데 이렇게 외부에서 값을 전달할 때 해당 입력값을 제대로 검증하지 않는다면 어떻게 될까...?

<br>

### LFI (Local File Inclusion)
사용자가 page 파라미터에 어떤 값을 넣느냐에 따라, 서버는 그에 맞는 파일을 찾아서 불러오게 된다.

만약 이 값이 적절한 검증 없이 처리된다면,  
서버 내부에 있는 민감한 시스템 파일 (ex. /etc/passwd)을 포함시키도록 조작할 수 있게 될 것이다.

이런 취약점을 **LFI (Local File Inclusion, 로컬 파일 포함)** 이라고 하며,
이를 통해 공격자는 인증 우회, 정보 유출 등의 공격을 수행해볼 수 있게 된다.

<br>

다시 문제로 돌아와 해당 페이지의 소스 코드를 확인할 수 있는지 확인해보았다.

(아무대나 우클릭 -> 페이지 소스 보기)  

![Natas7 figure4](/assets/img/natas/2025-08-04-15-40-03.png)

소스를 확인해보니...

![Natas7 figure5](/assets/img/natas/2025-08-04-15-40-49.png)

주석에 친절히 다음 레벨(natas8)의 패스워드가 적힌 위치를 작성해두셨다.

<br>

해당 주소를 그대로 page 파라미터의 값으로 입력해 전송해주면?

```
http://natas7.natas.labs.overthewire.org/index.php?page=/etc/natas_webpass/natas8
```

![Natas7 figure6](/assets/img/natas/2025-08-04-15-57-27.png)

찾았다 플래그.

<br>

- flag : ~~xcoXLmzMkoIP9D7hlgPlh9XD7OgLAe5Q~~